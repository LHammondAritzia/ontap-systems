---
sidebar: greeley_sidebar
permalink: greeley/9336c_setup_and_configuration_guide_for_cisco_shared_switches.html
keywords:
summary:
---

= Setup and configuration guide for Cisco shared switches
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

//
// This file was created with NDAC Version 2.0 (August 17, 2020)
//
// 2021-04-29 11:40:03.129945
//

==== Switches supported by ONTAP

If you want to build ONTAP clusters with more than two nodes, you need two supported cluster network switches. You can use additional management switches, which are optional.

The following Cisco cluster network switches are supported.

===== Nexus 9336C-FX2

You can install the Cisco Nexus 9336C-FX2 switch (X190200/X190210) in a NetApp system cabinet or third-party cabinet with the standard brackets that are included with the switch.

The following table lists the part number and description for the 9336C-FX2 switch, fans, and power supplies:

|===
|Part number |Description

|X190200-CS-PE
|N9K-9336C-FX2, CS, PTSX, 36PT10/25/40/100GQSFP28
|X190200-CS-PI
|N9K-9336C-FX2, CS, PSIN, 36PT10/25/40/100GQSFP28
|X190210-FE-PE
|N9K-9336C, FTE, PTSX, 36PT10/25/40/100GQSFP28
|X190210-FE-PI
|N9K-9336C, FTE, PSIN, 36PT10/25/40/100GQSFP28
|X190002
|Accessory Kit X190001/X190003
|X-NXA-PAC-1100W-PE2
|N9K-9336C AC 1100W PSU - Port side exhaust airflow
|X-NXA-PAC-1100W-PI2
|N9K-9336C AC 1100W PSU - Port side Intake airflow
|X-NXA-FAN-65CFM-PE
|N9K-9336C 65CFM, Port side exhaust airflow
|X-NXA-FAN-65CFM-PI
|N9K-9336C 65CFM, Port side intake airflow
|===

==== Setup the switches

If you do not already have the required configuration information and documentation, you need to gather that information before setting up your cluster and storage switches.

===== Before you begin

* You must have access to an HTTP, FTP or TFTP server at the installation site to download the applicable NX-OS and reference configuration file (RCF) releases.
* You must have the required cluster network and storage switch documentation.
* See [Link to Required documentation] for more information.
* You must have the required controller documentation and ONTAP documentation.
+
See [Link to NetApp documentation]

* You must have the applicable licenses, network and configuration information, and cables.
* You must have the completed cabling worksheets.

[NOTE]
In addition to cabling graphics, this guide does provide sample worksheets with recommended port assignments and blank worksheets that you can use to set up your cluster.

[NOTE]
For more information refer to the [Link to the Hardware Universe.]

===== About this task

All Cisco cluster and storage switches arrive with the standard Cisco factory-default configuration. These switches also have the current version of the NX-OS software but do not have the RCFs loaded.

*Attention:* You must download the applicable NetApp cluster and storage RCFs from the NetApp Support Site at mysupport.netapp.com for the switches that you receive.

===== Procedure

. Rack the cluster network and management network switches and controllers. See the Installing a Cisco Nexus 9336C-FX2 cluster switch and pass-through panel in a NetApp cabinet guide for instructions to install the switch in a NetApp cabinet.
. Power on the cluster and storage switches and controllers.
. Perform an initial configuration of the cluster and storage switches based on information provided in [Link to Required configuration information. ]
. Verify the configuration choices you made in the display that appears at the end of the setup, and make sure that you save the configuration.
. Check the version on the cluster network switches, and if necessary, download the NetApp-supported version of the software to the switches.
+
If you download the NetApp-supported version of the software, then you must also download the NetApp Cluster Network Switch Reference Configuration File and merge it with the configuration you saved in Step 5. You can download the file and the instructions from the Cisco Ethernet Switches page.

. Check the software version on the switches and, if necessary, download the NetApp-supported version of the software to the switches. If you have your own switches, refer to the Cisco site.

===== Required configuration information

For configuration, you need the appropriate number and type of cables and cable connectors for your switches. Depending on the type of switch you are initially configuring, you need to connect to the switch console port with the included console cable; you also need to provide specific network information.

===== Required network information for all switches

* You need the following network information for all switch configurations:
* IP subnet for management network traffic
* Host names and IP addresses for each of the storage system controllers and all applicable switches
* Most storage system controllers are managed through the e0M interface by connecting to the Ethernet service port (wrench icon). On AFF A800 and AFF A700 systems, the e0M interface uses a dedicated Ethernet port.
* Refer to the [Link to Hardware Universe] for latest information.

===== Required network information for Cisco Nexus 9336C-FX2 switches

For the Cisco Nexus 9336C-FX2 switch, you need to provide applicable responses to the following initial setup questions when you first boot the switch. Your site's security policy defines the responses and services to enable:

* Abort Auto Provisioning and continue with normal setup? (yes/no)
+
Respond with yes. The default is no.

* Do you want to enforce secure password standard? (yes/no)
+
Respond with yes. The default is yes.

* Enter the password for admin.
+
The default password is admin; you must create a new, strong password.
+
A weak password can be rejected.

* Would you like to enter the basic configuration dialog? (yes/no)
+
Respond with yes at the initial configuration of the switch.

* Create another login account? (yes/no)
+
Your answer depends on your site's policies on alternate administrators. The default is no.

* Configure read-only SNMP community string? (yes/no)
+
Respond with no. The default is no.

* Configure read-write SNMP community string? (yes/no)
+
Respond with no. The default is no.

* Enter the switch name.
+
The switch name is limited to 63 alphanumeric characters.

* Continue with out-of-band (mgmt0) management configuration? (yes/no)
+
Respond with yes (the default) at that prompt. At the mgmt0 IPv4 address: prompt, enter your IP address: ip_address

* Configure the default-gateway? (yes/no)
+
Respond with yes. At the IPv4 address of the default-gateway: prompt, enter your default_gateway.

* Configure advanced IP options? (yes/no)
+
Respond with no. The default is no.

* Enable the telnet service? (yes/no)
+
Respond with no. The default is no.

* Enabled SSH service? (yes/no)
+
Respond with yes. The default is yes.

[NOTE]
SSH is recommended when using Cluster Switch Health Monitor (CSHM) for its log collection features. SSHv2 is also recommended for enhanced security.

* Enter the type of SSH key you want to generate (dsa/rsa/rsa1). The default is rsa.
* Enter the number of key bits (1024- 2048).
* Configure the NTP server? (yes/no)
+
Respond with no. The default is no.

* Configure default interface layer (L3/L2):
+
Respond with L2. The default is L2.

* Configure default switch port interface state (shut/noshut):
+
Respond with noshut. The default is noshut.

* Configure CoPP system profile (strict/moderate/lenient/dense):
+
Respond with strict. The default is strict.

* Would you like to edit the configuration? (yes/no)
+
You should see the new configuration at this point. Review and make any necessary changes to the configuration you just entered. Respond with no at the prompt if you are satisfied with the configuration. Respond with yes if you want to edit your configuration settings.

* Use this configuration and save it? (yes/no)
+
Respond with yes to save the configuration. This automatically updates the kickstart and system images.

[NOTE]
If you do not save the configuration at this stage, none of the changes will be in effect the next time you reboot the switch.

For more information about the initial configuration of your switch, see the following guide:  [Link to Cisco Nexus 9336C-FX2 Installation and Upgrade Guides]

===== Required documentation for shared switches

You need specific switch and controller documentation to set up your ONTAP cluster.

To set up the Cisco Nexus 9336C-FX2 shared switches, you need the following documentation from the Cisco Nexus 9000 Series Switches Support page:

|===
|Document title |Description

|Nexus 9000 Series Hardware Installation Guide
|Provides detailed information about site requirements, switch hardware details, and installation options.
|Cisco Nexus 9000 Series Switch Software Configuration Guides (choose the guide for the NX-OS release installed on your switches)
|Provides initial switch configuration information that you need before you can configure the switch for ONTAP operation.
|Cisco Nexus 9000 Series NX-OS Software Upgrade and Downgrade Guide (choose the guide for the NX-OS release installed on your switches)
|Provides information on how to downgrade the switch to ONTAP supported switch software, if necessary.
|Cisco Nexus 9000 Series NX-OS Command Reference Master Index
|Provides links to the various command references provided by Cisco.
|Cisco Nexus 9000 MIBs Reference
|Describes the Management Information Base (MIB) files for the Nexus 9000 switches.
|Nexus 9000 Series NX-OS System Message Reference
|Describes the system messages for Cisco Nexus 9000 series switches, those that are informational, and others that might help diagnose problems with links, internal hardware, or the system software.
|Cisco Nexus 9000 Series NX-OS Release Notes (choose the notes for the NX-OS release installed on your switches)
|Describes the features, bugs, and limitations for the Cisco Nexus 9000 Series.
|Regulatory Compliance and Safety Information for Cisco Nexus 9000 Series
|Provides international agency compliance, safety, and statutory information for the Nexus 9000 series switches.
|===

==== Cisco Nexus 9336C-FX2 cabling details

You can use the following cabling images to complete the cabling between the controllers and the switches.

image:9336c_image1.jpg[Error: Missing Graphic Image]

image:9336c_image2.jpg[Error: Missing Graphic Image]

===== Cisco Nexus 9336C-FX2 cabling worksheet

If you want to document the supported platforms, you must complete the blank cabling worksheet by using completed sample cabling worksheet as a guide.

The sample port definition on each pair of switches is as follows:

|===
|Shared switch A |Shared switch B

|Switch port
|Port role
|Port usage
|Switch port
|Port role
|Port usage
|1
|Cluster
|40/100GbE
|1
|Cluster
|40/100GbE
|2
|Cluster
|40/100GbE
|2
|Cluster
|40/100GbE
|3
|Cluster
|40/100GbE
|3
|Cluster
|40/100GbE
|4
|Cluster
|40/100GbE
|4
|Cluster
|40/100GbE
|5
|Cluster
|40/100GbE
|5
|Cluster
|40/100GbE
|6
|Cluster
|40/100GbE
|6
|Cluster
|40/100GbE
|7
|Cluster
|40/100GbE
|7
|Cluster
|40/100GbE
|8
|Cluster
|40/100GbE
|8
|Cluster
|40/100GbE
|9/1-4
|Cluster
|40/100GbE
|9/1-4
|Cluster
|40/100GbE
|10/1-4
|Cluster
|100GbE w/4x25GbE b/o
|10/1-4
|Cluster
|100GbE w/4x25GbE b/o
|11
|Storage
|100GbE
|11
|Storage
|100GbE
|12
|Storage
|100GbE
|12
|Storage
|100GbE
|13
|Storage
|100GbE
|13
|Storage
|100GbE
|14
|Storage
|100GbE
|14
|Storage
|100GbE
|15
|Storage
|100GbE
|15
|Storage
|100GbE
|16
|Storage
|100GbE
|16
|Storage
|100GbE
|17
|Storage
|100GbE
|17
|Storage
|100GbE
|18
|Storage
|100GbE
|18
|Storage
|100GbE
|19
|Storage
|100GbE
|19
|Storage
|100GbE
|20
|Storage
|100GbE
|20
|Storage
|100GbE
|21
|Storage
|100GbE
|21
|Storage
|100GbE
|22
|Storage
|100GbE
|22
|Storage
|100GbE
|23
|Storage
|100GbE
|23
|Storage
|100GbE
|24
|Storage
|100GbE
|24
|Storage
|100GbE
|25
|Storage
|100GbE
|25
|Storage
|100GbE
|26
|Storage
|100GbE
|26
|Storage
|100GbE
|27
|Storage
|100GbE
|27
|Storage
|100GbE
|28
|Storage
|100GbE
|28
|Storage
|100GbE
|28
|Storage
|100GbE
|28
|Storage
|100GbE
|29
|Storage
|100GbE
|29
|Storage
|100GbE
|30
|Storage
|100GbE
|30
|Storage
|100GbE
|31
|Storage
|100GbE
|31
|Storage
|100GbE
|32
|Storage
|100GbE
|32
|Storage
|100GbE
|33
|Storage
|100GbE
|33
|Storage
|100GbE
|34
|Storage
|100GbE
|34
|Storage
|100GbE
|35
|ISL
|100GbE
|35
|ISL
|100GbE
|36
|ISL
|100GbE
|36
|ISL
|100GbE
|===

Where:

* 100G ISL to switch A port 35
* 100G ISL to switch A port 36
* 100G ISL to switch B port 35
* 100G ISL to switch B port 36

===== Blank cabling worksheet

You can use the blank cabling worksheet to document the platforms that are supported as nodes in a cluster. The Supported Cluster Connections table of the Hardware Universe defines the cluster ports used by the platform.

|===
|Shared switch A |Shared switch B

|Switch port
|Port usage
|Switch port
|Port usage
|1
|
|1
|
|2
|
|2
|
|3
|
|3
|
|4
|
|4
|
|5
|
|5
|
|6
|
|6
|
|7
|
|7
|
|8
|
|8
|
|9/1-4
|
|9/1-4
|
|10/1-4
|
|10/1-4
|
|11
|
|11
|
|12
|
|12
|
|13
|
|13
|
|14
|
|14
|
|15
|
|15
|
|16
|
|16
|
|17
|
|17
|
|18
|
|18
|
|19
|
|19
|
|20
|
|20
|
|21
|
|21
|
|22
|
|22
|
|23
|
|23
|
|24
|
|24
|
|25
|
|25
|
|26
|
|26
|
|27
|
|27
|
|28
|
|28
|
|28
|
|28
|
|29
|
|29
|
|30
|
|30
|
|31
|
|31
|
|32
|
|32
|
|33
|
|33
|
|34
|
|34
|
|35
|100G ISL to switch B port 35
|35
|100G ISL to switch A port 35
|36
|100G ISL to switch B port 36
|36
|100G ISL to switch A port 36
|===
